{"version":3,"sources":["webpack:///./constants.ts?377f","src/Aircraft.tsx","src/Grid.tsx","src/Flight.tsx","src/hooks/useClock.ts","src/calculations/common.ts","src/calculations/takeoff.ts","src/calculations/tilt_to_cruise.ts","src/FlightOptionInputs.tsx","src/Planner.tsx","src/calculations/main.ts","App.tsx"],"names":["Math","pow","stator_width","aircraft_width","Background","styled","Animated","View","Fulselage","AircraftComp","ForceBox","ForceVector","DirectionVector","Aircraft","vertical","horizontal","pitch","back_thrust_components","front_thrust_components","useWindowDimensions","width","height","animatedBackground","useAnimatedStyle","top","value","distance","left","transform","rotate","degree","animatedVectorBox","animatedFrontVectorBox","getVectorComponentStyle","side","direction","thrust_component","get_aircraft_style","get_force_vector_style","total","style","Grid","AbsoluteBackground","Array","keys","map","index","e","backgroundColor","opacity","position","Text","BackButton","TouchableOpacity","margin","Overview","Box","Flight","setNavigation","data","options","mode","useSharedValue","acceleration","velocity","rad","clock_running","clock","runClock","withTiming","duration","NR_OF_SEC","easing","Easing","linear","finished","useAnimatedReaction","formatedClock","useDerivedValue","Number","round","toFixed","resultClock","isNew","useClock","rounded_clock","frontThrustComponents","backThrustComponents","getBoxStyle","mode_val","clockBarStyle","start_clock","active","panGesture","Gesture","Pan","onBegin","console","log","cancelAnimation","onTouchesDown","onTouchesUp","onChange","drag_clock","translationX","clamped_drag_clock","max","min","onFinalize","onEnd","withDecay","velocityX","clamp","animatedBackgroundStyle","gesture","justifyContent","flex","onPress","flexDirection","alignItems","num","runTakeoff","engines_running","vAcceleration","vVelocity","vDistance","back_thrust","front_thrust","logger","potVelocity","potAltitude","j","potAcceleration","targetAltitude","correction_thrust","MAX_THRUST","adjust_for_horizontal","thrust_total","pitch_angle","cos","PI","runTiltToCruise","tilting","pitchVelocity","pitchAcceleration","toString","maxPitch","disableHorizontal","Input","TextInput","Toggle","FlightOptionInputs","setOptions","useState","setTargetAltitude","targetDistance","setTargetDistance","setMaxPitch","aircraftType","setAircraftType","setDisableHorizontal","onChangeText","number","isNaN","curr","Button","title","Planner","setData","navigation","useEffect","flightData","hAcceleration","hVelocity","hDistance","pitchDistance","i","results","front_vertical","front_horizontal","sin","back_vertical","back_horizontal","flightMoment","push","calculateFlight","App","SafeAreaView","StatusBar"],"mappings":"qPAM+CA,KAAKC,IAAI,IAAK,IAC3BD,KAAKC,IAAI,GAAI,I,OC2JzCC,EAAe,GACfC,EAAiB,GAEjBC,EAAaC,YAAOC,UAASC,KAAhBF,CAAH,gLACNF,EACCA,EACOA,EAAiB,GAO7BK,EAAYH,IAAOE,KAAV,sHAEPJ,EAAiB,EAAI,EACnBA,GAKJM,EAAeJ,YAAOC,UAASC,KAAhBF,CAAH,gLAERH,EACCA,EACOA,EAAe,GAM3BQ,EAAWL,YAAOC,UAASC,KAAhBF,CAAH,+EAKRM,EAAcN,YAAOC,UAASC,KAAhBF,CAAH,sFAMXO,EAAkBP,YAAOC,UAASC,KAAhBF,CAAH,wFAMNQ,EApLmB,SAAC,GAM5B,IALNC,EAKK,EALLA,SACAC,EAIK,EAJLA,WACAC,EAGK,EAHLA,MACAC,EAEK,EAFLA,uBACAC,EACK,EADLA,wBAEA,EAA0BC,cAAlBC,EAAR,EAAQA,MAAOC,EAAf,EAAeA,OAGTC,EAAqBC,2BAAiB,WAAD,iBAC1C,MAAO,CACNC,IACCH,EAAS,EACTlB,EAAiB,EAChBW,EAASW,MAAMC,SAAW,GDjCH,GCkCzBC,KACCP,EAAQ,EACRjB,EAAiB,EAChBY,EAAWU,MAAMC,SAAW,GDtCL,GCuCzBE,UAAW,CAAC,CAAEC,OAAQb,EAAMS,MAAMK,OAAS,UAVF,0BArCnCT,EAqCmC,eApCtBlB,EAoCsB,SArCDW,EAqCC,aD5BhB,GC4BgB,MApClCM,EAoCkC,WApCDL,EAoCC,aD7BhB,GC6BgB,MAlC9BC,GAkC8B,ocAAC,IActCe,EAAoBR,2BAAiB,WAAD,iBACzC,MAAO,CACNK,UAAW,CAAC,CAAEC,QAASb,EAAMS,MAAMK,OAAS,QAC5CT,OAAgD,EAAxCJ,EAAuBQ,MAAMX,SAnBlB,EAoBnBM,MAAiD,EAA1CH,EAAuBQ,MAAMV,WApBjB,EAqBnBY,KArBmB,GAqBZV,EAAuBQ,MAAMV,WACpCS,IACCrB,EAAiB,EAvBC,EAwBlBc,EAAuBQ,MAAMX,WARU,yBAlD5BE,EAkD4B,uBA5CbC,EA4Ca,aAhBrB,EAgBqB,eA5ClCd,GA4CkC,4hBAAC,IAYrC6B,EAAyBT,2BAAiB,WAAD,iBAC9C,MAAO,CACNK,UAAW,CAAC,CAAEC,QAASb,EAAMS,MAAMK,OAAS,QAC5CT,OAAiD,EAAzCH,EAAwBO,MAAMX,SA/BnB,EAgCnBM,MAAkD,EAA3CF,EAAwBO,MAAMV,WAhClB,EAiCnBY,KACCxB,EAlCkB,EAmClBe,EAAwBO,MAAMV,WAC/BS,IACCrB,EAAiB,EArCC,EAsClBe,EAAwBO,MAAMX,WAVc,yBA9DjCE,EA8DiC,wBAxDlBE,EAwDkB,aA5B1B,EA4B0B,eAxDvCf,GAwDuC,+iBAAC,IAc1C8B,EAAuB,0BAAIC,EAAcC,GAE9C,IAAIC,EACK,SAARF,EAAkBhB,EAA0BD,EAoB7C,OAnB4BM,2BAAiB,WAAD,iBAG3C,MAAO,CACNF,OACc,YAAbc,EAnDiB,EAoDdC,EAAiBX,MAAMX,SACvB,EACJM,MACc,YAAbe,EACG,EAxDc,EAyDdC,EAAiBX,MAAMV,WAC3BS,IA1DkB,EA0DbY,EAAiBX,MAAMX,SAC5Ba,KACc,YAAbQ,EA5DiB,EA6DdC,EAAiBX,MAAMV,WACvB,IAhBsC,6BA5EpCoB,EA4EoC,iBA5EVC,EA4EU,aA9CxB,GA8CwB,sfAAC,KAJjB,2CA9EalB,EA8Eb,uBA9EuCD,EA8EvC,iBA7EAM,mBA6EA,aA1CR,GA0CQ,6rBA0BvBc,EAAkB,0BAAIF,GAW3B,OATsBZ,2BAAiB,WAAD,iBACrC,MAAO,CACNC,IAAKrB,EAAiB,EAAID,EAAe,EACzCyB,KACc,QAAbQ,GACIjC,EAAe,EAChBC,EAAiBD,EAAe,IANA,kCAxGYC,EAwGZ,aAxG6BD,EAwG7B,UAxG9BiC,GAwG8B,wUAAC,KAFhB,oCAxGDZ,mBAwGC,eArG6BpB,EAqG7B,aArG8CD,GAqG9C,8YAclBoC,EAAsB,0BAAIH,GAY/B,OAVyBZ,2BAAiB,WAAD,iBACxC,MAAO,CACNC,IAAKrB,EAAiB,EACtBwB,KAAmB,QAAbQ,EAAsB,EAAIhC,EAChCkB,OACc,SAAbc,EAzFiB,EA0FdjB,EAAwBO,MAAMc,MA1FhB,EA2FdtB,EAAuBQ,MAAMc,QAPM,kCAtHPpC,EAsHO,UArH/BgC,EAqH+B,wBArHRjB,EAqHQ,aApFrB,EAoFqB,uBArH6CD,GAqH7C,scAAC,KAFf,oCAtHFM,mBAsHE,eAnHSpB,EAmHT,wBAlHQe,EAkHR,aAlFP,EAkFO,uBAlH6DD,GAkH7D,khBAe5B,OACC,eAAC,EAAD,CAAYuB,MAAOlB,EAAnB,UACC,cAACd,EAAD,IACA,cAACC,EAAD,CAAc+B,MAAOH,EAAmB,UACxC,cAAC5B,EAAD,CAAc+B,MAAOH,EAAmB,WACxC,eAAC3B,EAAD,CAAU8B,MAAOT,EAAjB,UACC,cAACnB,EAAD,CACC4B,MAAOP,EAAwB,OAAQ,cAExC,cAACrB,EAAD,CACC4B,MAAOP,EAAwB,OAAQ,mBAGzC,eAACvB,EAAD,CAAU8B,MAAOR,EAAjB,UACC,cAACpB,EAAD,CACC4B,MAAOP,EAAwB,QAAS,cAEzC,cAACrB,EAAD,CACC4B,MAAOP,EAAwB,QAAS,mBAG1C,cAACtB,EAAD,CAAa6B,MAAOF,EAAuB,UAC3C,cAAC3B,EAAD,CAAa6B,MAAOF,EAAuB,e,iBCjE/BG,EArFe,WAC7B,MAA0BtB,cAAlBE,EAAR,EAAQA,OAAQD,EAAhB,EAAgBA,MAEVsB,EAAqBrC,IAAOE,KAAV,4GAEbc,EACDD,GAkDV,OACC,eAACsB,EAAD,WACE,IAAIC,MAAM,IAAIC,QAAQC,KAAI,SAACC,GAC3B,OAAO,cAACvC,EAAA,EAAD,CAAMiC,OAjDUO,EAiDcD,EAhDd,CACxBtB,IAAK,GAAMH,EFRc,GEQL0B,EACpBpB,KAAMP,EAAQ,EACdC,OAAQ,EACRD,MAAOA,EAAQ,EACf4B,gBAAiB,QACjBC,QAAS,GACTC,SAAU,cAyCyCJ,GAjD5B,IAACC,KAoDvB,IAAIJ,MAAM,IAAIC,QAAQC,KAAI,SAACC,GAC3B,OACC,cAACK,EAAA,EAAD,CAAMX,OAzCoBO,EAyCQD,EAxCZ,CACxBtB,IAAK,GAAMH,EAAS,EFrBK,GEqBD0B,EACxBpB,KAAM,GACNN,OAAQ,EACRD,MAAOA,EAAQ,EACf8B,SAAU,aAmCR,SACU,GAARJ,GAD6CA,GAzCtB,IAACC,KA+C3B,IAAIJ,MAAM,IAAIC,QAAQC,KAAI,SAACC,GAC3B,OAAO,cAACvC,EAAA,EAAD,CAAMiC,OArCWO,EAqCcD,EApCf,CACxBnB,KAAM,GAAMP,EF/Ba,GE+BL2B,EACpB1B,OAAQA,EAAS,EACjBD,MAAO,EACP4B,gBAAiB,QACjBC,QAAS,GACTC,SAAU,cA8B0CJ,GArC5B,IAACC,KAwCxB,IAAIJ,MAAM,IAAIC,QAAQC,KAAI,SAACC,GAC3B,OACC,cAACK,EAAA,EAAD,CAAMX,OA9BqBO,EA8BQD,EA7Bb,CACxBtB,IAAKH,EAAS,EAAI,EAClBM,KAAM,GAAMP,EAAQ,EF5CK,GE4CD2B,EACxB1B,OAAQA,EAAS,EACjB6B,SAAU,aAyBR,SACU,GAARJ,GAD8CA,GA9BtB,IAACC,SC+M1BK,EAAa/C,IAAOgD,iBAAV,iNAGRC,GACCA,IAQHC,EAAWlD,IAAOE,KAAV,0GAMRiD,EAAMnD,YAAOC,UAASC,KAAhBF,CAAH,gGAGGiD,IAIGG,EAtQiB,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,cAAwBC,GAAW,EAApBC,QAAoB,EAAXD,MAClDvC,EAAUD,cAAVC,MACFyC,EAAOC,yBAAe,IACtB5C,EAA0B4C,yBAAe,CAC9CvB,MAAO,EACPzB,SAAU,EACVC,WAAY,IAEPE,EAAyB6C,yBAAe,CAC7CvB,MAAO,EACPzB,SAAU,EACVC,WAAY,IAEPD,EAAWgD,yBAAe,CAC/BC,aAAc,EACdC,SAAU,EACVtC,SAAU,IAELX,EAAa+C,yBAAe,CACjCC,aAAc,EACdC,SAAU,EACVtC,SAAU,IAELV,EAAQ8C,yBAAe,CAC5BC,aAAc,EACdC,SAAU,EACVtC,SAAU,EACVI,OAAQ,EACRmC,IAAK,IAGAC,EAAgBJ,0BAAe,GAC/BK,EAAQL,yBAAe,IC/CN,SACvBK,EACAD,GAEA,IAAME,EAAQ,4BAGbD,EAAM1C,MAAQ4C,qBADI,GAGjB,CACCC,SAAUC,IAAmBJ,EAAM1C,MACnC+C,OAAQC,SAAOC,QAJO,0BAMtBC,IACiB,IAAbA,IACHR,EAAM1C,MAAQ,EACdyC,EAAczC,OAAQ,IATD,yBAZtB0C,EAYsB,cAXtBD,GAWsB,6PAHX,yBAJTC,EAIS,WATCE,aASD,eAPHI,SAAOC,QAOJ,cAHTR,GAGS,2YAkBdU,8BAAoB,WAAD,MAClB,kBAAMV,EAAczC,OADF,iCA7BbyC,GA6Ba,wMAAC,GAAD,0BAEjBA,GACIA,GACHE,KAJgB,4BA3BhBA,GA2BgB,uNASnB,IAAMS,EAAgBC,0BAAgB,WAAD,iBACpC,OAAOC,QAAQ/E,KAAKgF,MAAoB,IAAdb,EAAM1C,OAAe,KAAKwD,QAAQ,KADxB,yBArCVd,GAqCU,kOAAC,IAIhCe,EAAcpB,yBAAe,GACnCc,8BAAoB,WAAD,MAClB,kBAAMC,EAAcpD,MAAQyD,EAAYzD,OADtB,iCA3CboD,EA2Ca,YA3CSK,GA2CT,sOAAC,GAAD,0BAEjBC,GACIA,IAAOD,EAAYzD,MAAQoD,EAAcpD,QAH5B,+BA1CPyD,EA0CO,cA1CaL,GA0Cb,iPDYTO,CAASjB,EAAOD,GAE1BU,8BAAoB,WAAD,MAClB,kBAAMT,EAAM1C,OADM,yBAzDb0C,GAyDa,iLAAC,GAAD,0BAEjBA,GACA,GAAIA,EAAQ,GAAI,CACf,IAAMkB,EAAgBrF,KAAKgF,MAAc,IAARb,GAEjCN,EAAKpC,MAAQkC,EAAK0B,GAAexB,KACjC3C,EAAwBO,MACvBkC,EAAK0B,GAAeC,sBACrBrE,EAAuBQ,MACtBkC,EAAK0B,GAAeE,qBACrBzE,EAASW,MAAQkC,EAAK0B,GAAevE,SACrCC,EAAWU,MAAQkC,EAAK0B,GAAetE,WACvCC,EAAMS,MAAQkC,EAAK0B,GAAerE,QAblB,wBAtDhB6C,EAsDgB,KAjDFF,EAiDE,wBArDhBzC,EAqDgB,uBApDhBD,EAoDgB,SAnDhBH,EAmDgB,WAlDhBC,EAkDgB,MAjDhBC,GAiDgB,gmBAoCnB,IAAMwE,EAAc,SAACC,GAQpB,OAPqBlE,2BAAiB,WAAD,iBACpC,MAAO,CACNyB,gBACCa,EAAKpC,OAASgE,EAAW,QAAU,cACpCxC,QAASY,EAAKpC,OAASgE,EAAW,EAAI,KAJH,wBA3F1B5B,EA2F0B,SA3FZ4B,GA2FY,kSAAC,KAUjCC,EAAgBnE,2BAAiB,WAAD,iBACrC,MAAO,CACNH,MAAqB,GAAd+C,EAAM1C,MAAa,MAFU,yBAtG5B0C,GAsG4B,sNAAC,IAMjCwB,EAAc7B,yBAAe,GAC7B8B,EAAS9B,0BAAe,GACxB+B,EAAaC,IAAQC,MACzBC,QADiB,0BACRjD,GACTkD,QAAQC,IAAI,YACZP,EAAYlE,MAAQ0C,EAAM1C,MACtByC,EAAczC,QACjBwE,QAAQC,IAAI,gBACZhC,EAAczC,OAAQ,EACtB0E,0BAAgBhC,KAPA,+BA9GlBwB,EA8GkB,MAzGAxB,EAyGA,cA1GhBD,EA0GgB,gBAzGhBiC,mBAyGgB,2WAUjBC,cAViB,0BAUFrD,GACfkD,QAAQC,IAAI,SAXK,+KAajBG,YAbiB,0BAaJtD,GACbkD,QAAQC,IAAI,OAdK,6KAgBjBI,SAhBiB,0BAgBPvD,GACV6C,EAAOnE,OAAQ,EACf,IAAI8E,EAAaZ,EAAYlE,MAAQsB,EAAEyD,cAAgB,GAAKpF,GACxDqF,EAAqBzG,KAAK0G,IAAI,EAAG1G,KAAK2G,IAAIJ,EAAY,MAC1DpC,EAAM1C,MAAQgF,GApBG,0BA/GlBb,EA+GkB,YA9GDD,EA8GC,MA9G0CvE,EA8G1C,MA5GlB+C,GA4GkB,uWAsBjByC,WAtBiB,4BAuBjBX,QAAQC,IAAI,SACPN,EAAOnE,QACPyC,EAAczC,OACjBwE,QAAQC,IAAI,gBACZhC,EAAczC,OAAQ,EACtB0E,0BAAgBhC,KAEhB8B,QAAQC,IAAI,iBACZhC,EAAczC,OAAQ,IAGxBmE,EAAOnE,OAAQ,GAlCE,0BAlGlBmE,EAkGkB,cAtGd1B,EAsGc,gBAzGdiC,kBAyGc,MAzGEhC,GAyGF,saAoCjB0C,MApCiB,0BAoCV9D,GACPkD,QAAQC,IAAI,OACZ/B,EAAM1C,MAAQqF,oBAAU,CACvB9C,SAAUjB,EAAEgE,UAAY,GACxBC,MAAO,CAAC,EAAG,OAxCK,yBA9GlB7C,EA8GkB,UA9GJ2C,aA8GI,+PA4CbG,EAA0B1F,2BAAiB,WAAD,iBAC/C,MAAO,CACNyB,gBAAiBkB,EAAczC,MAAQ,QAAU,YAFH,iCA1J5ByC,GA0J4B,2PAAC,KAMhC,4BAEhB+B,QAAQC,IAAI,gBACZhC,EAAczC,OAAQ,EACtB0E,0BAAgBhC,IAJA,0BAhKhBD,EAgKgB,gBA/JhBiC,kBA+JgB,MA/JAhC,GA+JA,4QAOjB,OACC,cAAC,IAAD,CAAiB+C,QAASrB,EAA1B,SAMC,eAACvF,EAAA,QAASC,KAAV,CACCiC,MAAO,CACNyE,EACA,CACCE,eAAgB,gBAChBC,KAAM,IALT,UASC,cAAC,EAAD,IACA,cAAC,EAAD,CACOtG,WACAC,aACAC,QACAC,yBACAC,4BAGP,cAACkC,EAAD,CAAYiE,QAAS,kBAAM3D,EAAc,UAAzC,SACC,cAACP,EAAA,EAAD,kBAED,eAAC5C,EAAA,EAAD,WACC,eAACA,EAAA,EAAD,CACCiC,MAAO,CACN8E,cAAe,MACfC,WAAY,WAHd,UAMC,eAAChH,EAAA,EAAD,CAAMiC,MAAO,CAAEc,OH5LC,IG4LhB,UACC,cAACH,EAAA,EAAD,UAAO,aACP,cAACA,EAAA,EAAD,UAAO,iBACP,cAACA,EAAA,EAAD,UAAO,aACP,cAACA,EAAA,EAAD,UAAO,gBAGR,eAAC5C,EAAA,EAAD,CAAMiC,MAAO,CAAEc,OHnMC,IGmMhB,UACC,cAACH,EAAA,EAAD,UAAO,eACP,cAACA,EAAA,EAAD,UAAO,iBACP,cAACA,EAAA,EAAD,UAAO,aACP,cAACA,EAAA,EAAD,UAAO,gBAER,eAAC5C,EAAA,EAAD,CAAMiC,MAAO,CAAEc,OHzMC,IGyMhB,UACC,cAACH,EAAA,EAAD,UAAO,UACP,cAACA,EAAA,EAAD,UAAO,iBACP,cAACA,EAAA,EAAD,UAAO,aACP,cAACA,EAAA,EAAD,UAAO,mBAIT,cAAC7C,EAAA,QAASC,KAAV,CACCiC,MAAO,CACNkD,EACA,CACCrE,OAAQ,EACR2B,gBAAiB,YAKpB,eAACO,EAAD,WACC,cAACC,EAAD,CAAKhB,MAAOgD,EAAY,WAAxB,SACC,cAACrC,EAAA,EAAD,wBAED,cAACK,EAAD,CAAKhB,MAAOgD,EAAY,kBAAxB,SACC,cAACrC,EAAA,EAAD,+BAED,cAACK,EAAD,CAAKhB,MAAOgD,EAAY,UAAxB,SACC,cAACrC,EAAA,EAAD,uBAED,cAACK,EAAD,CAAKhB,MAAOgD,EAAY,gBAAxB,SACC,cAACrC,EAAA,EAAD,6BAED,cAACK,EAAD,CAAKhB,MAAOgD,EAAY,WAAxB,SACC,cAACrC,EAAA,EAAD,oCE1PM6B,EAAQ,SAACwC,GACrB,OAAOxH,KAAKgF,MAAY,IAANwC,GAAe,KCGrBC,EAAU,0BACtBC,EACA9D,EACA+D,EACAC,EACAC,EACAC,EACAC,EACAC,EACAnE,GAGA,GAAI6D,EAIH,IAHA,IACIO,EAAcL,EACdM,EAAcL,EACTM,EAAI,EAAGA,GAAK,IAAMA,IAG1B,IADAD,IADAD,IAA4BG,OACc,MACvBxE,EAAQyE,eAAgB,CAC1CX,GAAkB,EAClB,MAeH,GARCG,GAAsC,GAAzBjE,EAAQyE,gBACR,GAAbT,GACiB,GAAjBD,IAEA9D,EAAO,kBAIJ+D,EAAY,GAAsB,GAAjBD,EAAoB,CACxC,IAAMW,EAAoBtD,GAAQ4C,EAAY,EAAK,IAAM,OAEzDG,EAAeO,EACfR,EAAcQ,EACdrC,QAAQC,IAAI,gBAAiBoC,QAIrBT,GAAsC,GAAzBjE,EAAQyE,gBAAwBT,GAAa,GAClEG,EAAe,MACfD,EAAc,OAILJ,GAOTK,EN/CiCQ,GMgDjCT,ENhDiCS,KMyCjCR,EAAe,EACfD,EAAc,GASf,MAAO,CACNJ,kBACAK,eACAD,cACAE,SACAnE,OACA8D,gBACAC,YACAC,cAtEqB,yBAqBO7C,EArBP,oBNWYuD,IMXZ,yvCCDVC,EAAwB,SACpCC,EACAC,GAEA,OAAO1I,KAAK2G,IACX8B,EAAezI,KAAK2I,IAAKD,EAAc1I,KAAK4I,GAAM,KPOjBL,KOFtBM,EAAkB,SAC9BjF,EACAkF,EACAJ,EACAK,EACAC,EACAnF,EACAkE,EACAD,EACAE,GAqEA,OAjEAA,EAASU,EAAYO,WAGjBH,GACCJ,GAAe9E,EAAQsF,SAAW,IACrCJ,GAAU,GAKRJ,EAAiC,GAAnB9E,EAAQsF,UAAkBH,GAAiB,EACxDnF,EAAQuF,mBACXpB,EAdmB,MAenBD,EAfmB,QAiBnBC,EAAeS,EAjBI,MAiBgCE,GACnDZ,EAAcU,EAlBK,MAkB+BE,IAgB3CI,EACJlF,EAAQuF,mBACXpB,EApCmB,MACO,EAoC1BD,EArCmB,MACO,IAsC1BC,EAAeS,EAvCI,MACO,EAwCzBE,GAEDZ,EAAcU,EA3CK,MACO,EA4CzBE,IAOE9E,EAAQuF,mBACXpB,EArDmB,MACO,EAqD1BD,EAtDmB,MACO,IAuD1BC,EAAeS,EAxDI,MACO,EAyDzBE,GAEDZ,EAAcU,EA5DK,MACO,EA6DzBE,IAKI,CACNV,SACAc,UACAjF,OACAiE,cACAC,iB,2BCwBIqB,GAAQ/I,YAAOgJ,IAAPhJ,CAAH,oFAGCiD,IAGNgG,GAASjJ,IAAOE,KAAV,oFACA+C,IAKGiG,GA1H6B,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WAC9C,EAA4CC,mBAAS,IAArD,WAAOpB,EAAP,KAAuBqB,EAAvB,KACA,EAA4CD,mBAAS,IAArD,WAAOE,EAAP,KAAuBC,EAAvB,KACA,EAAgCH,mBAAS,IAAzC,WAAOP,EAAP,KAAiBW,EAAjB,KACA,EAAwCJ,mBAAS,QAAjD,WAAOK,EAAP,KAAqBC,EAArB,KACA,EAAkDN,oBAAkB,GAApE,WAAON,EAAP,KAA0Ba,EAA1B,KAYA,OACC,qCACC,cAACzJ,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,MACvB,cAACH,EAAA,EAAD,UAAO,kBACP,cAACiG,GAAD,CACC3H,MAAO4G,EAAeY,WACtBgB,aAAc,SAAClH,GACd,IAAMmH,EAASnF,OAAOhC,GACjBoH,MAAMD,IACVR,EAAkBQ,MAIrB,cAAC3J,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,MACvB,cAACH,EAAA,EAAD,UAAO,kBACP,cAACiG,GAAD,CACC3H,MAAOkI,EAAeV,WACtBgB,aAAc,SAAClH,GACd,IAAMmH,EAASnF,OAAOhC,GACjBoH,MAAMD,IACVN,EAAkBM,MAIrB,cAAC3J,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,MACvB,cAACH,EAAA,EAAD,UAAO,gBACP,cAACiG,GAAD,CACC3H,MAAOyH,EAASD,WAChBgB,aAAc,SAAClH,GACd,IAAMmH,EAASnF,OAAOhC,GACjBoH,MAAMD,IACVL,EAAYK,MAIf,cAAC3J,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,MACvB,eAAC/C,EAAA,EAAD,CAAMiC,MAAO,CAAE8E,cAAe,OAA9B,UACC,cAACjE,GAAA,EAAD,CAAkBgE,QAAS,kBAAM0C,EAAgB,SAAjD,SACC,cAACT,GAAD,CACC9G,MAAO,CACNQ,gBACiB,QAAhB8G,EAAyB,QAAU,aAHtC,SAMC,cAAC3G,EAAA,EAAD,uBAGF,cAACE,GAAA,EAAD,CACCgE,QAAS,kBAAM0C,EAAgB,gBADhC,SAGC,cAACT,GAAD,CACC9G,MAAO,CACNQ,gBACiB,eAAhB8G,EACG,QACA,aALN,SAQC,cAAC3G,EAAA,EAAD,iCAKH,cAAC5C,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,MACvB,eAAC/C,EAAA,EAAD,CAAMiC,MAAO,CAAE8E,cAAe,OAA9B,UACC,cAACjE,GAAA,EAAD,CACCgE,QAAS,WACR2C,GAAqB,SAACI,GAAD,OAAoBA,MAF3C,SAKC,cAACd,GAAD,CACC9G,MAAO,CACNQ,gBAAiBmG,EACd,QACA,aAJL,SAOC,cAAChG,EAAA,EAAD,8CAGF,cAAC5C,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,SAExB,cAAC/C,EAAA,EAAD,CAAMiC,MAAO,CAAEnB,OAAQiC,MACvB,cAAC+G,EAAA,EAAD,CACCC,MAAM,KACNjD,QAAS,WA9FXmC,EAAW,CACVnB,eAAgBA,EAChBsB,eAAgBA,EAChBG,aAAcA,EACdX,kBAAmBA,EACnBD,SAAUA,WC0BEqB,GAlCkB,SAAC,GAM3B,IALN3G,EAKK,EALLA,QACA4F,EAIK,EAJLA,WACAgB,EAGK,EAHLA,QACA9G,EAEK,EAFLA,cACA+G,EACK,EADLA,WAqBA,OAnBAC,qBAAU,WACS,SAAdD,GAAkD,KAAzB7G,EAAQkG,cACpCN,EAAW,CACVM,aAAc,GACdzB,eAAgB,EAChBsB,eAAgB,EAChBR,mBAAmB,EACnBD,SAAU,MAEV,CAACtF,EAAS6G,IAEbC,qBAAU,WACT,GAA6B,KAAzB9G,EAAQkG,aAAqB,CAChC,IAAMa,EC9BsB,SAAC/G,GAuB/B,IAtBA,IAAM+G,EAA2B,GAE7BjD,GAAkB,EAClBoB,GAAU,EAEVjF,EAAO,UACP8D,EAAgB,EAChBC,EAAY,EACZC,EAAY,EACZ+C,EAAgB,EAChBC,EAAY,EACZC,EAAY,EACZ/C,EAAe,EACfD,EAAc,EAEdkB,EAAoB,EACpBD,EAAgB,EAChBgC,EAAgB,EAChBrC,EAAc,EAEdV,EAAS,GAEJgD,EAAI,EAAGA,GAAK,IAAMA,IAAK,CAE/B,GAAY,WAARnH,EAAmB,CACtB,IAAMoH,EAAUxD,EACfC,EACA9D,EACA+D,EACAC,EACAC,EACAC,EACAC,EACAC,EACAnE,GAED6D,EAAkBuD,EAAQvD,gBAC1BC,EAAgBsD,EAAQtD,cACxBC,EAAYqD,EAAQrD,UACpBC,EAAYoD,EAAQpD,UACpBC,EAAcmD,EAAQnD,YACtBC,EAAekD,EAAQlD,aACvBC,EAASiD,EAAQjD,OACjBnE,EAAOoH,EAAQpH,KAIhB,GAAY,kBAARA,EAA0B,CAC7B,IAAMoH,EAAUpC,EACfjF,EACAkF,EACAJ,EACAK,EACAC,EACAnF,EACAkE,EACAD,EACAE,GAGDA,EAASiD,EAAQjD,OACjBc,EAAUmC,EAAQnC,QAClBjF,EAAOoH,EAAQpH,KACfiE,EAAcmD,EAAQnD,YACtBC,EAAekD,EAAQlD,aAEZ,UAARlE,GAECiH,GAAa,KAChBjH,EAAO,eACPiF,GAAU,GAiFZE,EAAoBhE,EAAM8C,EAAcC,GACxCgB,EAAgB/D,EAAM+D,EAAgB/D,EAAMgE,EAAoB,MAChE+B,EAAgB/F,EAAM+F,EAAgB/F,EAAM+D,EAAgB,MAC5DL,EAAc1D,EAAuB,IAAhB+F,EAAuB/K,KAAK4I,IAGjD,IAAMsC,EAAiBlG,EACtBhF,KAAK2I,IAAKD,EAAc1I,KAAK4I,GAAM,KAAOb,GAErCoD,EAAmBnG,EACxBhF,KAAKoL,IAAK1C,EAAc1I,KAAK4I,GAAM,KAAOb,GAErCsD,EAAgBrG,EACrBhF,KAAK2I,IAAKD,EAAc1I,KAAK4I,GAAM,KAAOd,GAErCwD,EAAkBtG,EACvBhF,KAAKoL,IAAK1C,EAAc1I,KAAK4I,GAAM,KAAOd,GAK1CH,EADG/D,EAAQuF,kBACKnE,EAAM+C,EAAeD,EAAc,MAC7B9C,EAAMkG,EAAiBG,EAAgB,MAC9DzD,EAAY5C,EAAM4C,EAAY5C,EAAM2C,EAAgB,MACpDE,EAAY7C,EAAM6C,EAAY7C,EAAM4C,EAAY,MAG3ChE,EAAQuF,oBACZyB,EAAgB5F,EAAMmG,EAAmBG,GACzCrF,QAAQC,IAAI0E,GACZC,EAAY7F,EAAM6F,EAAY7F,EAAM4F,EAAgB,MACpDE,EAAY9F,EAAM8F,EAAY9F,EAAM6F,EAAY,OAGjD,IAAMU,EAA2B,CAChC1H,KAAMA,EACNyB,sBAAuB,CACtB/C,MAAOwF,EACPjH,SAAUoK,EACVnK,WAAYoK,GAEb5F,qBAAsB,CACrBhD,MAAOuF,EACPhH,SAAUuK,EACVtK,WAAYuK,GAEbxK,SAAU,CACTiD,aAAc4D,EACd3D,SAAU4D,EACVlG,SAAUmG,GAEX9G,WAAY,CACXgD,aAAc6G,EACd5G,SAAU6G,EACVnJ,SAAUoJ,GAEX9J,MAAO,CACN+C,aAAciF,EACdhF,SAAU+E,EACVrH,SAAUqJ,EACVjJ,OAAQ4G,EACRzE,IAAKe,EAAO0D,EAAc1I,KAAK4I,GAAM,MAEtCZ,OAAQA,GAGT2C,EAAWa,KAAKD,GAGjB,OAAOZ,ED/Lcc,CAAgB7H,GACnC4G,EAAQG,GACRjH,EAAc,aAEb,CAACE,IAGH,eAACrD,EAAA,EAAD,CAAMiC,MAAO,CAAEc,OTzBK,ISyBpB,UACC,cAACH,EAAA,EAAD,6BACA,cAAC,GAAD,CAA0BqG,mBEyCdkC,IAxCW,SAAC,GAAQ,OAClC,MAAwBjC,mBAAuB,IAA/C,WAAO9F,EAAP,KAAa6G,EAAb,KACA,EAA8Bf,mBAAwB,CACrDpB,eAAgB,EAChBsB,eAAgB,EAChBG,aAAc,GACdX,mBAAmB,EACnBD,SAAU,IALX,WAAOtF,EAAP,KAAgB4F,EAAhB,KAOA,EAAoCC,mBAAiB,SAArD,WAAOgB,EAAP,KAAmB/G,EAAnB,KAEMtD,EAAaC,IAAOE,KAAV,oEAKhB,OACC,cAACoL,EAAA,EAAD,CAAcnJ,MAAO,CAAE4E,KAAM,GAA7B,SACC,eAAChH,EAAD,WACC,cAACwL,EAAA,EAAD,CAAWpJ,MAAM,SACF,SAAdiI,GAAuC,WAAdA,EACzB,cAAC,GAAD,CACO7G,UACA4F,aACAgB,UACAC,aACA/G,kBAGP,cAAC,EAAD,CACOA,gBACAE,UACAD,gB","file":"static/js/app.e49ff010.chunk.js","sourcesContent":["export const colors = {\n\tgrey: \"#D9D9D9\",\n};\n\n// export const maxForce = 20; // kg m+2 s-2\n\nexport const gravitational_constant = 6.6743 * Math.pow(10, -11); // m3 kg-1 s-2\nexport const earth_mass = 5.972 * Math.pow(10, 24); // kg\nexport const earth_radius = 6371000; // m\nexport const aircraft_mass = 1; // kg\n\nexport const LAT_DISTANCE = 50;\nexport const LON_DISTANCE = 50;\n\nexport const MAX_THRUST = 20;\nexport const MAX_THRUST_PER_SIDE = MAX_THRUST / 2;\n\nexport const margin = 30;\n\n/* \ndef calculate_gravity(mass, altitude):\n    gravitational_constant = -astro.G\n    earth_mass = astro.M_earth.value * astro.M_earth.unit\n    earth_radius = u.earthRad.to(u.m) * u.m\n\n    gravity = ((gravitational_constant * earth_mass * mass) /\n               (earth_radius + altitude)**2)\n\n    return gravity\n*/\n","import React from \"react\";\nimport { useWindowDimensions } from \"react-native\";\nimport Animated, { useAnimatedStyle } from \"react-native-reanimated\";\nimport styled from \"styled-components/native\";\nimport { ThrustComponents } from \"../App\";\nimport { LAT_DISTANCE, LON_DISTANCE } from \"../constants\";\n\ninterface Props {\n\t// flight_data: Animated.SharedValue<FlightData>;\n\tvertical: Animated.SharedValue<{\n\t\tacceleration: number;\n\t\tvelocity: number;\n\t\tdistance: number;\n\t}>;\n\thorizontal: Animated.SharedValue<{\n\t\tacceleration: number;\n\t\tvelocity: number;\n\t\tdistance: number;\n\t}>;\n\tpitch: Animated.SharedValue<{\n\t\tacceleration: number;\n\t\tvelocity: number;\n\t\tdistance: number;\n\t\tdegree: number;\n\t\trad: number;\n\t}>;\n\tback_thrust_components: Animated.SharedValue<ThrustComponents>;\n\tfront_thrust_components: Animated.SharedValue<ThrustComponents>;\n}\n\nconst Aircraft: React.FC<Props> = ({\n\tvertical,\n\thorizontal,\n\tpitch,\n\tback_thrust_components,\n\tfront_thrust_components,\n}) => {\n\tconst { width, height } = useWindowDimensions();\n\tconst thrustScaler = 4;\n\n\tconst animatedBackground = useAnimatedStyle(() => {\n\t\treturn {\n\t\t\ttop:\n\t\t\t\theight / 2 -\n\t\t\t\taircraft_width / 2 -\n\t\t\t\t(vertical.value.distance / 10) * LON_DISTANCE,\n\t\t\tleft:\n\t\t\t\twidth / 2 -\n\t\t\t\taircraft_width / 2 +\n\t\t\t\t(horizontal.value.distance / 10) * LAT_DISTANCE,\n\t\t\ttransform: [{ rotate: pitch.value.degree + \"deg\" }],\n\t\t};\n\t});\n\n\tconst animatedVectorBox = useAnimatedStyle(() => {\n\t\treturn {\n\t\t\ttransform: [{ rotate: -pitch.value.degree + \"deg\" }],\n\t\t\theight: back_thrust_components.value.vertical * 2 * thrustScaler,\n\t\t\twidth: back_thrust_components.value.horizontal * 2 * thrustScaler,\n\t\t\tleft: -back_thrust_components.value.horizontal * thrustScaler, //-back_thrust.value * thrustScaler,\n\t\t\ttop:\n\t\t\t\taircraft_width / 2 -\n\t\t\t\tback_thrust_components.value.vertical * thrustScaler, //aircraft_width / 2 - back_thrust.value * thrustScaler,\n\t\t};\n\t});\n\n\tconst animatedFrontVectorBox = useAnimatedStyle(() => {\n\t\treturn {\n\t\t\ttransform: [{ rotate: -pitch.value.degree + \"deg\" }],\n\t\t\theight: front_thrust_components.value.vertical * 2 * thrustScaler,\n\t\t\twidth: front_thrust_components.value.horizontal * 2 * thrustScaler,\n\t\t\tleft:\n\t\t\t\taircraft_width -\n\t\t\t\tfront_thrust_components.value.horizontal * thrustScaler, //-back_thrust.value * thrustScaler,\n\t\t\ttop:\n\t\t\t\taircraft_width / 2 -\n\t\t\t\tfront_thrust_components.value.vertical * thrustScaler,\n\t\t};\n\t});\n\n\tconst getVectorComponentStyle = (side: string, direction: string) => {\n\t\t\"worklet\";\n\t\tlet thrust_component =\n\t\t\tside == \"front\" ? front_thrust_components : back_thrust_components;\n\t\tconst animatedVectorStyle = useAnimatedStyle(() => {\n\t\t\t/* const vertical_thrust =\n\t\t\t\tMath.cos((pitch_angle.value * Math.PI) / 180) * back_thrust.value; */\n\t\t\treturn {\n\t\t\t\theight:\n\t\t\t\t\tdirection == \"vertical\"\n\t\t\t\t\t\t? thrust_component.value.vertical * thrustScaler\n\t\t\t\t\t\t: 1,\n\t\t\t\twidth:\n\t\t\t\t\tdirection == \"vertical\"\n\t\t\t\t\t\t? 1\n\t\t\t\t\t\t: thrust_component.value.horizontal * thrustScaler,\n\t\t\t\ttop: thrust_component.value.vertical * thrustScaler,\n\t\t\t\tleft:\n\t\t\t\t\tdirection == \"vertical\"\n\t\t\t\t\t\t? thrust_component.value.horizontal * thrustScaler\n\t\t\t\t\t\t: 0,\n\t\t\t};\n\t\t});\n\t\treturn animatedVectorStyle;\n\t};\n\n\tconst get_aircraft_style = (direction: string) => {\n\t\t\"worklet\";\n\t\tconst aircraftStyle = useAnimatedStyle(() => {\n\t\t\treturn {\n\t\t\t\ttop: aircraft_width / 2 - stator_width / 2,\n\t\t\t\tleft:\n\t\t\t\t\tdirection == \"back\"\n\t\t\t\t\t\t? -stator_width / 2\n\t\t\t\t\t\t: aircraft_width - stator_width / 2,\n\t\t\t};\n\t\t});\n\t\treturn aircraftStyle;\n\t};\n\n\tconst get_force_vector_style = (direction: string) => {\n\t\t\"worklet\";\n\t\tconst forceVectorStyle = useAnimatedStyle(() => {\n\t\t\treturn {\n\t\t\t\ttop: aircraft_width / 2,\n\t\t\t\tleft: direction == \"back\" ? 0 : aircraft_width,\n\t\t\t\theight:\n\t\t\t\t\tdirection == \"front\"\n\t\t\t\t\t\t? front_thrust_components.value.total * thrustScaler\n\t\t\t\t\t\t: back_thrust_components.value.total * thrustScaler,\n\t\t\t};\n\t\t});\n\t\treturn forceVectorStyle;\n\t};\n\n\treturn (\n\t\t<Background style={animatedBackground}>\n\t\t\t<Fulselage />\n\t\t\t<AircraftComp style={get_aircraft_style(\"back\")} />\n\t\t\t<AircraftComp style={get_aircraft_style(\"front\")} />\n\t\t\t<ForceBox style={animatedVectorBox}>\n\t\t\t\t<DirectionVector\n\t\t\t\t\tstyle={getVectorComponentStyle(\"back\", \"vertical\")}\n\t\t\t\t/>\n\t\t\t\t<DirectionVector\n\t\t\t\t\tstyle={getVectorComponentStyle(\"back\", \"horizontal\")}\n\t\t\t\t/>\n\t\t\t</ForceBox>\n\t\t\t<ForceBox style={animatedFrontVectorBox}>\n\t\t\t\t<DirectionVector\n\t\t\t\t\tstyle={getVectorComponentStyle(\"front\", \"vertical\")}\n\t\t\t\t/>\n\t\t\t\t<DirectionVector\n\t\t\t\t\tstyle={getVectorComponentStyle(\"front\", \"horizontal\")}\n\t\t\t\t/>\n\t\t\t</ForceBox>\n\t\t\t<ForceVector style={get_force_vector_style(\"back\")} />\n\t\t\t<ForceVector style={get_force_vector_style(\"front\")} />\n\t\t</Background>\n\t);\n};\n\nconst stator_width = 11;\nconst aircraft_width = 40;\n\nconst Background = styled(Animated.View)`\n\twidth: ${aircraft_width}px;\n\theight: ${aircraft_width}px;\n\tborder-radius: ${aircraft_width / 2}px;\n\tborder-width: 1px;\n\tborder-color: #ff000038;\n\tposition: absolute;\n\tflex-direction: row;\n`;\n\nconst Fulselage = styled.View`\n\tposition: absolute;\n\ttop: ${aircraft_width / 2 - 2}px;\n\twidth: ${aircraft_width}px;\n\theight: 4px;\n\tbackground-color: black;\n`;\n\nconst AircraftComp = styled(Animated.View)`\n\tposition: absolute;\n\twidth: ${stator_width}px;\n\theight: ${stator_width}px;\n\tborder-radius: ${stator_width / 2}px;\n\tborder-width: 1px;\n\tborder-color: black;\n\tbackground-color: white;\n`;\n\nconst ForceBox = styled(Animated.View)`\n\tposition: absolute;\n\t//\tbackground-color: #ff000021;\n`;\n\nconst ForceVector = styled(Animated.View)`\n\tposition: absolute;\n\twidth: 1px;\n\tbackground-color: black;\n`;\n\nconst DirectionVector = styled(Animated.View)`\n\tbackground-color: black;\n\topacity: 0.3;\n\tposition: absolute;\n`;\n\nexport default Aircraft;\n","import React from \"react\";\nimport { Text, useWindowDimensions, View, ViewStyle } from \"react-native\";\nimport styled from \"styled-components/native\";\nimport { LAT_DISTANCE, LON_DISTANCE } from \"../constants\";\n\ninterface Props {}\n\nconst Grid: React.FC<Props> = () => {\n\tconst { height, width } = useWindowDimensions();\n\n\tconst AbsoluteBackground = styled.View`\n\t\tposition: absolute;\n\t\theight: ${height}px;\n\t\twidth: ${width}px;\n\t\toverflow: hidden;\n\t`;\n\n\tconst getLatitudeStyle = (e: number) => {\n\t\tconst style: ViewStyle = {\n\t\t\ttop: 0.5 * height - e * LAT_DISTANCE,\n\t\t\tleft: width / 2,\n\t\t\theight: 1,\n\t\t\twidth: width / 2,\n\t\t\tbackgroundColor: \"black\",\n\t\t\topacity: 0.3,\n\t\t\tposition: \"absolute\",\n\t\t};\n\t\treturn style;\n\t};\n\n\tconst getLatitudeTextStyle = (e: number) => {\n\t\tconst style: ViewStyle = {\n\t\t\ttop: 0.5 * height - 8 - e * LAT_DISTANCE,\n\t\t\tleft: 10,\n\t\t\theight: 1,\n\t\t\twidth: width / 2,\n\t\t\tposition: \"absolute\",\n\t\t};\n\t\treturn style;\n\t};\n\n\tconst getLongitudeStyle = (e: number) => {\n\t\tconst style: ViewStyle = {\n\t\t\tleft: 0.5 * width + e * LON_DISTANCE,\n\t\t\theight: height / 2,\n\t\t\twidth: 1,\n\t\t\tbackgroundColor: \"black\",\n\t\t\topacity: 0.3,\n\t\t\tposition: \"absolute\",\n\t\t};\n\t\treturn style;\n\t};\n\n\tconst getLongitudeTextStyle = (e: number) => {\n\t\tconst style: ViewStyle = {\n\t\t\ttop: height / 2 + 8,\n\t\t\tleft: 0.5 * width - 8 + e * LON_DISTANCE,\n\t\t\theight: height / 2,\n\t\t\tposition: \"absolute\",\n\t\t};\n\t\treturn style;\n\t};\n\n\treturn (\n\t\t<AbsoluteBackground>\n\t\t\t{[...Array(10).keys()].map((index) => {\n\t\t\t\treturn <View style={getLatitudeStyle(index)} key={index} />;\n\t\t\t})}\n\n\t\t\t{[...Array(10).keys()].map((index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Text style={getLatitudeTextStyle(index)} key={index}>\n\t\t\t\t\t\t{index * 10}\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\t})}\n\n\t\t\t{[...Array(10).keys()].map((index) => {\n\t\t\t\treturn <View style={getLongitudeStyle(index)} key={index} />;\n\t\t\t})}\n\n\t\t\t{[...Array(10).keys()].map((index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Text style={getLongitudeTextStyle(index)} key={index}>\n\t\t\t\t\t\t{index * 10}\n\t\t\t\t\t</Text>\n\t\t\t\t);\n\t\t\t})}\n\t\t</AbsoluteBackground>\n\t);\n};\n\nexport default Grid;\n","import React from \"react\";\nimport { Text, useWindowDimensions, View } from \"react-native\";\nimport { Gesture, GestureDetector } from \"react-native-gesture-handler\";\nimport Animated, {\n\tcancelAnimation,\n\tuseAnimatedReaction,\n\tuseAnimatedStyle,\n\tuseSharedValue,\n\twithDecay\n} from \"react-native-reanimated\";\nimport styled from \"styled-components/native\";\nimport { FlightData, FlightOptions } from \"../App\";\nimport { margin } from \"../constants\";\nimport Aircraft from \"./Aircraft\";\nimport Grid from \"./Grid\";\nimport { useClock } from \"./hooks/useClock\";\n\ninterface Props {\n\toptions: FlightOptions;\n\tdata: FlightData[];\n\tsetNavigation: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst Flight: React.FC<Props> = ({ setNavigation, options, data }) => {\n\tconst { width } = useWindowDimensions();\n\tconst mode = useSharedValue(\"\");\n\tconst front_thrust_components = useSharedValue({\n\t\ttotal: 0,\n\t\tvertical: 0,\n\t\thorizontal: 0,\n\t});\n\tconst back_thrust_components = useSharedValue({\n\t\ttotal: 0,\n\t\tvertical: 0,\n\t\thorizontal: 0,\n\t});\n\tconst vertical = useSharedValue({\n\t\tacceleration: 0,\n\t\tvelocity: 0,\n\t\tdistance: 0,\n\t});\n\tconst horizontal = useSharedValue({\n\t\tacceleration: 0,\n\t\tvelocity: 0,\n\t\tdistance: 0,\n\t});\n\tconst pitch = useSharedValue({\n\t\tacceleration: 0,\n\t\tvelocity: 0,\n\t\tdistance: 0,\n\t\tdegree: 0,\n\t\trad: 0,\n\t});\n\n\tconst clock_running = useSharedValue(true);\n\tconst clock = useSharedValue(0);\n\tconst _ = useClock(clock, clock_running);\n\n\tuseAnimatedReaction(\n\t\t() => clock.value,\n\t\t(clock) => {\n\t\t\tif (clock < 20) {\n\t\t\t\tconst rounded_clock = Math.round(clock * 100);\n\n\t\t\t\tmode.value = data[rounded_clock].mode;\n\t\t\t\tfront_thrust_components.value =\n\t\t\t\t\tdata[rounded_clock].frontThrustComponents;\n\t\t\t\tback_thrust_components.value =\n\t\t\t\t\tdata[rounded_clock].backThrustComponents;\n\t\t\t\tvertical.value = data[rounded_clock].vertical;\n\t\t\t\thorizontal.value = data[rounded_clock].horizontal;\n\t\t\t\tpitch.value = data[rounded_clock].pitch;\n\n\t\t\t\t/* console.log(\n\t\t\t\t\trounded_clock,\n\t\t\t\t\tback_thrust_components.value.total,\n\t\t\t\t\tfront_thrust_components.value.total,\n\t\t\t\t\tpitch.value.acceleration,\n\t\t\t\t\tpitch.value.velocity,\n\t\t\t\t\tdata[rounded_clock].logger\n\t\t\t\t\t//logger[rounded_clock]\n\t\t\t\t); */\n\n\t\t\t\t/* text.value = {\n\t\t\t\t\tvertical: {\n\t\t\t\t\t\tacceleration: vertical.value.acceleration.toString(),\n\t\t\t\t\t\tvelocity: vertical.value.velocity.toString(),\n\t\t\t\t\t\tdistance: vertical.value.distance.toFixed(4),\n\t\t\t\t\t},\n\t\t\t\t}; */\n\t\t\t}\n\t\t}\n\t);\n\n\tconst getBoxStyle = (mode_val: string) => {\n\t\tconst landingStyle = useAnimatedStyle(() => {\n\t\t\treturn {\n\t\t\t\tbackgroundColor:\n\t\t\t\t\tmode.value == mode_val ? \"white\" : \"transparent\",\n\t\t\t\topacity: mode.value == mode_val ? 1 : 0.2,\n\t\t\t};\n\t\t});\n\t\treturn landingStyle;\n\t};\n\n\tconst clockBarStyle = useAnimatedStyle(() => {\n\t\treturn {\n\t\t\twidth: clock.value * 10 + \"%\",\n\t\t};\n\t});\n\n\tconst start_clock = useSharedValue(0);\n\tconst active = useSharedValue(false);\n\tconst panGesture = Gesture.Pan()\n\t\t.onBegin((e) => {\n\t\t\tconsole.log(\"click...\");\n\t\t\tstart_clock.value = clock.value;\n\t\t\tif (clock_running.value) {\n\t\t\t\tconsole.log(\"stop clock!!\");\n\t\t\t\tclock_running.value = false;\n\t\t\t\tcancelAnimation(clock);\n\t\t\t}\n\t\t})\n\t\t.onTouchesDown((e) => {\n\t\t\tconsole.log(\"down\");\n\t\t})\n\t\t.onTouchesUp((e) => {\n\t\t\tconsole.log(\"up\");\n\t\t})\n\t\t.onChange((e) => {\n\t\t\tactive.value = true;\n\t\t\tlet drag_clock = start_clock.value + e.translationX * (20 / width);\n\t\t\tlet clamped_drag_clock = Math.max(0, Math.min(drag_clock, 2000));\n\t\t\tclock.value = clamped_drag_clock;\n\t\t})\n\t\t.onFinalize(() => {\n\t\t\tconsole.log(\"final\");\n\t\t\tif (!active.value) {\n\t\t\t\tif (clock_running.value) {\n\t\t\t\t\tconsole.log(\"stop clock!!\");\n\t\t\t\t\tclock_running.value = false;\n\t\t\t\t\tcancelAnimation(clock);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(\"start clock!!\");\n\t\t\t\t\tclock_running.value = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tactive.value = false;\n\t\t})\n\t\t.onEnd((e) => {\n\t\t\tconsole.log(\"end\");\n\t\t\tclock.value = withDecay({\n\t\t\t\tvelocity: e.velocityX / 80,\n\t\t\t\tclamp: [0, 20], // optionally define boundaries for the animation\n\t\t\t});\n\t\t});\n\n\tconst animatedBackgroundStyle = useAnimatedStyle(() => {\n\t\treturn {\n\t\t\tbackgroundColor: clock_running.value ? \"white\" : \"#e2e2e5\",\n\t\t};\n\t});\n\n\tconst set_running = () => {\n\t\t\"worklet\";\n\t\tconsole.log(\"stop clock!!\");\n\t\tclock_running.value = false;\n\t\tcancelAnimation(clock);\n\t};\n\n\treturn (\n\t\t<GestureDetector gesture={panGesture}>\n\t\t\t{/* <TouchableWithoutFeedback\n\t\t\t\tonPress={() => {\n\t\t\t\t\tset_running();\n\t\t\t\t}}\n\t\t\t> */}\n\t\t\t<Animated.View\n\t\t\t\tstyle={[\n\t\t\t\t\tanimatedBackgroundStyle,\n\t\t\t\t\t{\n\t\t\t\t\t\tjustifyContent: \"space-between\",\n\t\t\t\t\t\tflex: 1,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Grid />\n\t\t\t\t<Aircraft\n\t\t\t\t\t{...{ vertical }}\n\t\t\t\t\t{...{ horizontal }}\n\t\t\t\t\t{...{ pitch }}\n\t\t\t\t\t{...{ back_thrust_components }}\n\t\t\t\t\t{...{ front_thrust_components }}\n\t\t\t\t/>\n\n\t\t\t\t<BackButton onPress={() => setNavigation(\"input\")}>\n\t\t\t\t\t<Text>x</Text>\n\t\t\t\t</BackButton>\n\t\t\t\t<View>\n\t\t\t\t\t<View\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tflexDirection: \"row\",\n\t\t\t\t\t\t\talignItems: \"stretch\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<View style={{ margin: margin }}>\n\t\t\t\t\t\t\t<Text>{\"Vertical\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Acceleration\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Velocity\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Distance\"}</Text>\n\t\t\t\t\t\t\t{/* <AnimatedText text={text(vertical)} /> */}\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<View style={{ margin: margin }}>\n\t\t\t\t\t\t\t<Text>{\"Horizontal\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Acceleration\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Velocity\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Distance\"}</Text>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<View style={{ margin: margin }}>\n\t\t\t\t\t\t\t<Text>{\"Pitch\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Acceleration\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Velocity\"}</Text>\n\t\t\t\t\t\t\t<Text>{\"Distance\"}</Text>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\n\t\t\t\t\t<Animated.View\n\t\t\t\t\t\tstyle={[\n\t\t\t\t\t\t\tclockBarStyle,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\theight: 2,\n\t\t\t\t\t\t\t\tbackgroundColor: \"black\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t></Animated.View>\n\n\t\t\t\t\t<Overview>\n\t\t\t\t\t\t<Box style={getBoxStyle(\"takeoff\")}>\n\t\t\t\t\t\t\t<Text>Takeoff</Text>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box style={getBoxStyle(\"tilt_to_cruise\")}>\n\t\t\t\t\t\t\t<Text>Tilt to Cruise</Text>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box style={getBoxStyle(\"cruise\")}>\n\t\t\t\t\t\t\t<Text>Cruise</Text>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box style={getBoxStyle(\"tilt_to_land\")}>\n\t\t\t\t\t\t\t<Text>Tilt to Land</Text>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box style={getBoxStyle(\"landing\")}>\n\t\t\t\t\t\t\t<Text>Landing</Text>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Overview>\n\t\t\t\t</View>\n\t\t\t</Animated.View>\n\t\t\t{/* </TouchableWithoutFeedback> */}\n\t\t</GestureDetector>\n\t);\n};\n\nconst BackButton = styled.TouchableOpacity`\n\theight: 50px;\n\twidth: 50px;\n\ttop: ${margin / 2}px;\n\tleft: ${margin / 2}px;\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-color: white;\n\tborder-width: 1px;\n\tborder-color: black;\n`;\n\nconst Overview = styled.View`\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tjustify-self: flex-end;\n`;\n\nconst Box = styled(Animated.View)`\n\tborder-color: black;\n\tborder-width: 1px;\n\tpadding: ${margin / 2}px;\n\tflex: 1;\n`;\n\nexport default Flight;\n","import Animated, {\n\tEasing,\n\tuseAnimatedReaction,\n\tuseDerivedValue,\n\tuseSharedValue,\n\twithTiming\n} from \"react-native-reanimated\";\n\nexport const useClock = (\n\tclock: Animated.SharedValue<number>,\n\tclock_running: Animated.SharedValue<boolean>\n) => {\n\tconst runClock = () => {\n\t\t\"worklet\";\n\t\tconst NR_OF_SEC = 20;\n\t\tclock.value = withTiming(\n\t\t\tNR_OF_SEC,\n\t\t\t{\n\t\t\t\tduration: NR_OF_SEC * 1000 - clock.value,\n\t\t\t\teasing: Easing.linear,\n\t\t\t},\n\t\t\t(finished) => {\n\t\t\t\tif (finished === true) {\n\t\t\t\t\tclock.value = 0;\n\t\t\t\t\tclock_running.value = false\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t};\n\n\tuseAnimatedReaction(\n\t\t() => clock_running.value,\n\t\t(clock_running) => {\n\t\t\tif (clock_running) {\n\t\t\t\trunClock();\n\t\t\t}\n\t\t}\n\t);\n\n\tconst formatedClock = useDerivedValue(() => {\n\t\treturn Number((Math.round(clock.value * 100) / 100).toFixed(2));\n\t});\n\n\tconst resultClock = useSharedValue(0);\n\tuseAnimatedReaction(\n\t\t() => formatedClock.value > resultClock.value,\n\t\t(isNew) => {\n\t\t\tif (isNew) resultClock.value = formatedClock.value;\n\t\t}\n\t);\n\treturn resultClock;\n};\n","export const round = (num: number) => {\n\treturn Math.round(num * 10000) / 10000;\n};\n","import { FlightOptions } from \"../../App\";\nimport { MAX_THRUST_PER_SIDE } from \"../../constants\";\nimport { round } from \"./common\";\n\nexport const runTakeoff = (\n\tengines_running: boolean,\n\toptions: FlightOptions,\n\tvAcceleration: number,\n\tvVelocity: number,\n\tvDistance: number,\n\tback_thrust: number,\n\tfront_thrust: number,\n\tlogger: string,\n\tmode: string\n) => {\n\t\"worklet\";\n\tif (engines_running) {\n\t\tconst potAcceleration = -9.81;\n\t\tlet potVelocity = vVelocity;\n\t\tlet potAltitude = vDistance;\n\t\tfor (let j = 0; j <= 2000; j++) {\n\t\t\tpotVelocity = potVelocity + potAcceleration / 100;\n\t\t\tpotAltitude = potAltitude + potVelocity / 100;\n\t\t\tif (potAltitude >= options.targetAltitude) {\n\t\t\t\tengines_running = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Switch to Cruise\n\tif (\n\t\tvDistance >= options.targetAltitude * 0.5 &&\n\t\tvVelocity == 0 &&\n\t\tvAcceleration == 0\n\t) {\n\t\tmode = \"tilt_to_cruise\";\n\t}\n\n\t// Speed Correction\n\tif (vVelocity < 0 && vAcceleration == 0) {\n\t\tconst correction_thrust = round((-vVelocity / 2) * 100 + 9.81 / 2);\n\n\t\tfront_thrust = correction_thrust;\n\t\tback_thrust = correction_thrust;\n\t\tconsole.log(\"speed correct\", correction_thrust);\n\t}\n\n\t// Hover\n\telse if (vDistance >= options.targetAltitude * 0.5 && vVelocity <= 0) {\n\t\tfront_thrust = 9.81 / 2;\n\t\tback_thrust = 9.81 / 2;\n\t}\n\n\t// Free Fall\n\telse if (!engines_running) {\n\t\tfront_thrust = 0;\n\t\tback_thrust = 0;\n\t}\n\n\t//  Max Thrust\n\telse {\n\t\tfront_thrust = MAX_THRUST_PER_SIDE;\n\t\tback_thrust = MAX_THRUST_PER_SIDE;\n\t}\n\n\treturn {\n\t\tengines_running,\n\t\tfront_thrust,\n\t\tback_thrust,\n\t\tlogger,\n\t\tmode,\n\t\tvAcceleration,\n\t\tvVelocity,\n\t\tvDistance,\n\t};\n};\n","import { FlightOptions } from \"../../App\";\nimport { MAX_THRUST_PER_SIDE } from \"../../constants\";\n\nexport const adjust_for_horizontal = (\n\tthrust_total: number,\n\tpitch_angle: number\n) => {\n\treturn Math.min(\n\t\tthrust_total / Math.cos((pitch_angle * Math.PI) / 180),\n\t\tMAX_THRUST_PER_SIDE\n\t);\n};\n\nexport const runTiltToCruise = (\n\toptions: FlightOptions,\n\ttilting: boolean,\n\tpitch_angle: number,\n\tpitchVelocity: number,\n\tpitchAcceleration: number,\n\tmode: string,\n\tfront_thrust: number,\n\tback_thrust: number,\n\tlogger: string\n) => {\n\tconst hover_thrust = 9.81 / 2;\n\tconst thrust_differential = 4; // Math.min(MAX_THRUST_PER_SIDE, 9.81 / 2);\n\tlogger = pitch_angle.toString();\n\n\t//TILT CUTTOFF\n\tif (tilting) {\n\t\tif (pitch_angle >= options.maxPitch / 2) {\n\t\t\ttilting = false;\n\t\t}\n\t}\n\n\t// Idle\n\tif (pitch_angle > options.maxPitch * 0.5 && pitchVelocity <= 0) {\n\t\tif (options.disableHorizontal) {\n\t\t\tfront_thrust = hover_thrust;\n\t\t\tback_thrust = hover_thrust;\n\t\t} else {\n\t\t\tfront_thrust = adjust_for_horizontal(hover_thrust, pitch_angle);\n\t\t\tback_thrust = adjust_for_horizontal(hover_thrust, pitch_angle);\n\t\t}\n\n\t\t// mode = \"cruise\";\n\t}\n\n\t/* // Speed Correction\n\telse if (pitchVelocity < 0 && pitchAcceleration == 0) {\n\t\tconst correction_thrust = round((-pitchVelocity / 2) * 100);\n\n\t\tfront_thrust = hover_thrust + correction_thrust / 2;\n\t\tback_thrust = hover_thrust - correction_thrust / 2;\n\t\tconsole.log(\"speed correct\", correction_thrust);\n\t} */\n\n\t// Thrust\n\telse if (tilting) {\n\t\tif (options.disableHorizontal) {\n\t\t\tfront_thrust = hover_thrust - thrust_differential;\n\t\t\tback_thrust = hover_thrust + thrust_differential;\n\t\t} else {\n\t\t\tfront_thrust = adjust_for_horizontal(\n\t\t\t\thover_thrust - thrust_differential,\n\t\t\t\tpitch_angle\n\t\t\t);\n\t\t\tback_thrust = adjust_for_horizontal(\n\t\t\t\thover_thrust + thrust_differential,\n\t\t\t\tpitch_angle\n\t\t\t);\n\t\t}\n\t}\n\n\t// Reverse Thrust\n\telse {\n\t\tif (options.disableHorizontal) {\n\t\t\tfront_thrust = hover_thrust + thrust_differential;\n\t\t\tback_thrust = hover_thrust - thrust_differential;\n\t\t} else {\n\t\t\tfront_thrust = adjust_for_horizontal(\n\t\t\t\thover_thrust + thrust_differential,\n\t\t\t\tpitch_angle\n\t\t\t);\n\t\t\tback_thrust = adjust_for_horizontal(\n\t\t\t\thover_thrust - thrust_differential,\n\t\t\t\tpitch_angle\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tlogger,\n\t\ttilting,\n\t\tmode,\n\t\tback_thrust,\n\t\tfront_thrust,\n\t};\n};\n","import React, { useState } from \"react\";\nimport { Button, Text, TextInput, TouchableOpacity, View } from \"react-native\";\nimport styled from \"styled-components/native\";\nimport { FlightOptions } from \"../App\";\nimport { margin } from \"../constants\";\n\ninterface Props {\n\tsetOptions: React.Dispatch<React.SetStateAction<FlightOptions>>;\n}\n\nconst FlightOptionInputs: React.FC<Props> = ({ setOptions }) => {\n\tconst [targetAltitude, setTargetAltitude] = useState(40);\n\tconst [targetDistance, setTargetDistance] = useState(40);\n\tconst [maxPitch, setMaxPitch] = useState(45);\n\tconst [aircraftType, setAircraftType] = useState(\"quad\");\n\tconst [disableHorizontal, setDisableHorizontal] = useState<boolean>(false);\n\n\tconst save_input = () => {\n\t\tsetOptions({\n\t\t\ttargetAltitude: targetAltitude,\n\t\t\ttargetDistance: targetDistance,\n\t\t\taircraftType: aircraftType,\n\t\t\tdisableHorizontal: disableHorizontal,\n\t\t\tmaxPitch: maxPitch,\n\t\t});\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t<Text>{\"Altitude (m):\"}</Text>\n\t\t\t<Input\n\t\t\t\tvalue={targetAltitude.toString()}\n\t\t\t\tonChangeText={(e: string) => {\n\t\t\t\t\tconst number = Number(e);\n\t\t\t\t\tif (!isNaN(number)) {\n\t\t\t\t\t\tsetTargetAltitude(number);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t<Text>{\"Distance (m):\"}</Text>\n\t\t\t<Input\n\t\t\t\tvalue={targetDistance.toString()}\n\t\t\t\tonChangeText={(e: string) => {\n\t\t\t\t\tconst number = Number(e);\n\t\t\t\t\tif (!isNaN(number)) {\n\t\t\t\t\t\tsetTargetDistance(number);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t<Text>{\"Tilt Angle:\"}</Text>\n\t\t\t<Input\n\t\t\t\tvalue={maxPitch.toString()}\n\t\t\t\tonChangeText={(e: string) => {\n\t\t\t\t\tconst number = Number(e);\n\t\t\t\t\tif (!isNaN(number)) {\n\t\t\t\t\t\tsetMaxPitch(number);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t<View style={{ flexDirection: \"row\" }}>\n\t\t\t\t<TouchableOpacity onPress={() => setAircraftType(\"quad\")}>\n\t\t\t\t\t<Toggle\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\taircraftType == \"quad\" ? \"white\" : \"lightgrey\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text>Quad</Text>\n\t\t\t\t\t</Toggle>\n\t\t\t\t</TouchableOpacity>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tonPress={() => setAircraftType(\"tail_sitter\")}\n\t\t\t\t>\n\t\t\t\t\t<Toggle\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundColor:\n\t\t\t\t\t\t\t\taircraftType == \"tail_sitter\"\n\t\t\t\t\t\t\t\t\t? \"white\"\n\t\t\t\t\t\t\t\t\t: \"lightgrey\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text>Tail Sitter</Text>\n\t\t\t\t\t</Toggle>\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\n\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t<View style={{ flexDirection: \"row\" }}>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\tsetDisableHorizontal((curr: boolean) => !curr);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Toggle\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundColor: disableHorizontal\n\t\t\t\t\t\t\t\t? \"white\"\n\t\t\t\t\t\t\t\t: \"lightgrey\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Text>Disable Horizontal Modement</Text>\n\t\t\t\t\t</Toggle>\n\t\t\t\t</TouchableOpacity>\n\t\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t</View>\n\t\t\t<View style={{ height: margin / 2 }} />\n\t\t\t<Button\n\t\t\t\ttitle=\"Go\"\n\t\t\t\tonPress={() => {\n\t\t\t\t\tsave_input();\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nconst Input = styled(TextInput)`\n\tborder-color: black;\n\tborder-width: 1px;\n\tpadding: ${margin / 2}px;\n`;\n\nconst Toggle = styled.View`\n\tpadding: ${margin / 2}px;\n\tborder-width: 1px;\n\tborder-color: black;\n`;\n\nexport default FlightOptionInputs;\n","import React, { useEffect } from \"react\";\nimport { Text, View } from \"react-native\";\nimport { FlightData, FlightOptions } from \"../App\";\nimport { margin } from \"../constants\";\nimport { calculateFlight } from \"./calculations/main\";\nimport FlightOptionInputs from \"./FlightOptionInputs\";\n\ninterface Props {\n\toptions: FlightOptions;\n\tsetOptions: React.Dispatch<React.SetStateAction<FlightOptions>>;\n\tsetData: React.Dispatch<React.SetStateAction<FlightData[]>>;\n\tsetNavigation: React.Dispatch<React.SetStateAction<string>>;\n\tnavigation: string;\n}\n\nconst Planner: React.FC<Props> = ({\n\toptions,\n\tsetOptions,\n\tsetData,\n\tsetNavigation,\n\tnavigation,\n}) => {\n\tuseEffect(() => {\n\t\tif (navigation == \"input\" && options.aircraftType !== \"\")\n\t\t\tsetOptions({\n\t\t\t\taircraftType: \"\",\n\t\t\t\ttargetAltitude: 0,\n\t\t\t\ttargetDistance: 0,\n\t\t\t\tdisableHorizontal: true,\n\t\t\t\tmaxPitch: 0,\n\t\t\t});\n\t}, [options, navigation]);\n\n\tuseEffect(() => {\n\t\tif (options.aircraftType !== \"\") {\n\t\t\tconst flightData = calculateFlight(options);\n\t\t\tsetData(flightData);\n\t\t\tsetNavigation(\"flight\");\n\t\t}\n\t}, [options]);\n\n\treturn (\n\t\t<View style={{ margin: margin }}>\n\t\t\t<Text>Flight Planner</Text>\n\t\t\t<FlightOptionInputs {...{ setOptions }} />\n\t\t</View>\n\t);\n};\n\nexport default Planner;\n","import { FlightData, FlightOptions } from \"../../App\";\nimport { round } from \"./common\";\nimport { runTakeoff } from \"./takeoff\";\nimport { runTiltToCruise } from \"./tilt_to_cruise\";\n\nexport const calculateFlight = (options: FlightOptions) => {\n\tconst flightData: FlightData[] = [];\n\n\tlet engines_running = true;\n\tlet tilting = true;\n\n\tlet mode = \"takeoff\";\n\tlet vAcceleration = 0;\n\tlet vVelocity = 0;\n\tlet vDistance = 0;\n\tlet hAcceleration = 0;\n\tlet hVelocity = 0;\n\tlet hDistance = 0;\n\tlet front_thrust = 0;\n\tlet back_thrust = 0;\n\n\tlet pitchAcceleration = 0;\n\tlet pitchVelocity = 0;\n\tlet pitchDistance = 0;\n\tlet pitch_angle = 0;\n\n\tlet logger = \"\";\n\n\tfor (let i = 0; i <= 2000; i++) {\n\t\t//TAKEOFF\n\t\tif (mode == \"takeoff\") {\n\t\t\tconst results = runTakeoff(\n\t\t\t\tengines_running,\n\t\t\t\toptions,\n\t\t\t\tvAcceleration,\n\t\t\t\tvVelocity,\n\t\t\t\tvDistance,\n\t\t\t\tback_thrust,\n\t\t\t\tfront_thrust,\n\t\t\t\tlogger,\n\t\t\t\tmode\n\t\t\t);\n\t\t\tengines_running = results.engines_running;\n\t\t\tvAcceleration = results.vAcceleration;\n\t\t\tvVelocity = results.vVelocity;\n\t\t\tvDistance = results.vDistance;\n\t\t\tback_thrust = results.back_thrust;\n\t\t\tfront_thrust = results.front_thrust;\n\t\t\tlogger = results.logger;\n\t\t\tmode = results.mode;\n\t\t}\n\n\t\t//CRUISE4\n\t\tif (mode == \"tilt_to_cruise\") {\n\t\t\tconst results = runTiltToCruise(\n\t\t\t\toptions,\n\t\t\t\ttilting,\n\t\t\t\tpitch_angle,\n\t\t\t\tpitchVelocity,\n\t\t\t\tpitchAcceleration,\n\t\t\t\tmode,\n\t\t\t\tfront_thrust,\n\t\t\t\tback_thrust,\n\t\t\t\tlogger\n\t\t\t);\n\n\t\t\tlogger = results.logger;\n\t\t\ttilting = results.tilting;\n\t\t\tmode = results.mode;\n\t\t\tback_thrust = results.back_thrust;\n\t\t\tfront_thrust = results.front_thrust;\n\t\t}\n\t\tif (mode == \"cruise\") {\n\t\t\t// Reverse Thrust\n\t\t\tif (hDistance >= 20) {\n\t\t\t\tmode = \"tilt_to_land\";\n\t\t\t\ttilting = true;\n\t\t\t}\n\t\t\t// Idle\n\t\t\telse {\n\t\t\t\t//front_thrust = round(9.81 / 2);\n\t\t\t\t//back_thrust = round(9.81 / 2);\n\t\t\t}\n\t\t}\n\t\t/* \tif (mode == \"tilt_to_land\") {\n\t\t\t\t//TILT CUTTOFF\n\t\t\t\tif (tilting) {\n\t\t\t\t\tif (pitch_angle <= target_pitch_angle / 2) {\n\t\t\t\t\t\ttilting = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Idle\n\t\t\t\tif (\n\t\t\t\t\tpitch_angle < target_pitch_angle / 2 &&\n\t\t\t\t\tradialVelocity >= 0\n\t\t\t\t) {\n\t\t\t\t\tfront_thrust = round(9.81 / 2);\n\t\t\t\t\tback_thrust = round(9.81 / 2);\n\t\t\t\t\t//\tmode = \"cruise\";\n\t\t\t\t}\n\n\t\t\t\t// Thrust\n\t\t\t\telse if (tilting) {\n\t\t\t\t\tfront_thrust = round(9.81 / 2 + 1);\n\t\t\t\t\tback_thrust = round(9.81 / 2 - 1);\n\t\t\t\t}\n\n\t\t\t\t// Reverse Thrust\n\t\t\t\telse {\n\t\t\t\t\tfront_thrust = round(9.81 / 2 - 1);\n\t\t\t\t\tback_thrust = round(9.81 / 2 + 1);\n\t\t\t\t}\n\t\t\t\tlogger = tilting + \"\";\n\t\t\t} */\n\n\t\t/*\n\t\t\t//LANDING\n\t\t\tif (mode[i] == \"landing\") {\n\t\t\t\t// Calculate Engine Cutoff\n\t\t\t\tmode_state = \"landing\";\n\t\t\t\tif (!engines_start) {\n\t\t\t\t\tconst potAcceleration = MAX_THRUST;\n\t\t\t\t\tlet potVelocity = hVelocity[i];\n\t\t\t\t\tlet potAltitude = vAltitude[i];\n\t\t\t\t\tfor (let j = 0; j <= 2000; j++) {\n\t\t\t\t\t\tpotVelocity = potVelocity + potAcceleration / 100;\n\t\t\t\t\t\tpotAltitude = potAltitude + potVelocity / 100;\n\t\t\t\t\t\tif (potAltitude <= 0) {\n\t\t\t\t\t\t\tengines_start = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Speed Correction\n\t\t\t\tif (hVelocity[i] < 0 && acceleration == 0) {\n\t\t\t\t\tconsole.log(\"speed correct\", hVelocity[i]);\n\t\t\t\t\tacceleration =\n\t\t\t\t\t\tMath.min(-hVelocity[i] * 100, MAX_THRUST) + 9.81;\n\t\t\t\t}\n\t\t\t\t// Hover\n\t\t\t\telse if (\n\t\t\t\t\tvAltitude[i] <= targetAltitude * 0.5 &&\n\t\t\t\t\thVelocity[i] >= 0\n\t\t\t\t) {\n\t\t\t\t\tacceleration = 0;\n\t\t\t\t}\n\t\t\t\t// Free Fall\n\t\t\t\telse if (!engines_start) {\n\t\t\t\t\tacceleration = -9.81;\n\t\t\t\t}\n\t\t\t\t// Max Thrust\n\t\t\t\telse acceleration = MAX_THRUST - 9.81;\n\t\t\t}\n\n\t\t\t*/\n\n\t\t// Pitch Angle\n\t\tpitchAcceleration = round(back_thrust - front_thrust);\n\t\tpitchVelocity = round(pitchVelocity + round(pitchAcceleration / 100));\n\t\tpitchDistance = round(pitchDistance + round(pitchVelocity / 100));\n\t\tpitch_angle = round((pitchDistance * 180) / Math.PI);\n\n\t\t// Thrust Components\n\t\tconst front_vertical = round(\n\t\t\tMath.cos((pitch_angle * Math.PI) / 180) * front_thrust\n\t\t);\n\t\tconst front_horizontal = round(\n\t\t\tMath.sin((pitch_angle * Math.PI) / 180) * front_thrust\n\t\t);\n\t\tconst back_vertical = round(\n\t\t\tMath.cos((pitch_angle * Math.PI) / 180) * back_thrust\n\t\t);\n\t\tconst back_horizontal = round(\n\t\t\tMath.sin((pitch_angle * Math.PI) / 180) * back_thrust\n\t\t);\n\n\t\t// Vertical Movement\n\t\tif (options.disableHorizontal) {\n\t\t\tvAcceleration = round(front_thrust + back_thrust - 9.81);\n\t\t} else vAcceleration = round(front_vertical + back_vertical - 9.81);\n\t\tvVelocity = round(vVelocity + round(vAcceleration / 100));\n\t\tvDistance = round(vDistance + round(vVelocity / 100));\n\n\t\t// Horizontal Movement\n\t\tif (!options.disableHorizontal) {\n\t\t\thAcceleration = round(front_horizontal + back_horizontal);\n\t\t\tconsole.log(hAcceleration);\n\t\t\thVelocity = round(hVelocity + round(hAcceleration / 100));\n\t\t\thDistance = round(hDistance + round(hVelocity / 100));\n\t\t}\n\n\t\tconst flightMoment: FlightData = {\n\t\t\tmode: mode,\n\t\t\tfrontThrustComponents: {\n\t\t\t\ttotal: front_thrust,\n\t\t\t\tvertical: front_vertical,\n\t\t\t\thorizontal: front_horizontal,\n\t\t\t},\n\t\t\tbackThrustComponents: {\n\t\t\t\ttotal: back_thrust,\n\t\t\t\tvertical: back_vertical,\n\t\t\t\thorizontal: back_horizontal,\n\t\t\t},\n\t\t\tvertical: {\n\t\t\t\tacceleration: vAcceleration,\n\t\t\t\tvelocity: vVelocity,\n\t\t\t\tdistance: vDistance,\n\t\t\t},\n\t\t\thorizontal: {\n\t\t\t\tacceleration: hAcceleration,\n\t\t\t\tvelocity: hVelocity,\n\t\t\t\tdistance: hDistance,\n\t\t\t},\n\t\t\tpitch: {\n\t\t\t\tacceleration: pitchAcceleration,\n\t\t\t\tvelocity: pitchVelocity,\n\t\t\t\tdistance: pitchDistance,\n\t\t\t\tdegree: pitch_angle,\n\t\t\t\trad: round((pitch_angle * Math.PI) / 180),\n\t\t\t},\n\t\t\tlogger: logger,\n\t\t};\n\n\t\tflightData.push(flightMoment);\n\t}\n\n\treturn flightData;\n};\n","import { StatusBar } from \"expo-status-bar\";\nimport React, { useState } from \"react\";\nimport { SafeAreaView } from \"react-native\";\nimport styled from \"styled-components/native\";\nimport Flight from \"./src/Flight\";\nimport Planner from \"./src/Planner\";\n\nexport interface FlightData {\n\tmode: string;\n\tfrontThrustComponents: ThrustComponents;\n\tbackThrustComponents: ThrustComponents;\n\tvertical: {\n\t\tacceleration: number;\n\t\tvelocity: number;\n\t\tdistance: number;\n\t};\n\thorizontal: {\n\t\tacceleration: number;\n\t\tvelocity: number;\n\t\tdistance: number;\n\t};\n\tpitch: {\n\t\tacceleration: number;\n\t\tvelocity: number;\n\t\tdistance: number;\n\t\tdegree: number;\n\t\trad: number;\n\t};\n\tlogger: string;\n}\n\nexport interface ThrustComponents {\n\ttotal: number;\n\tvertical: number;\n\thorizontal: number;\n}\n\nexport interface FlightOptions {\n\ttargetAltitude: number;\n\ttargetDistance: number;\n\taircraftType: string;\n\tdisableHorizontal: boolean;\n\tmaxPitch: number;\n}\n\nconst App: React.FC<{}> = ({}) => {\n\tconst [data, setData] = useState<FlightData[]>([]);\n\tconst [options, setOptions] = useState<FlightOptions>({\n\t\ttargetAltitude: 0,\n\t\ttargetDistance: 0,\n\t\taircraftType: \"\",\n\t\tdisableHorizontal: false,\n\t\tmaxPitch: 0,\n\t});\n\tconst [navigation, setNavigation] = useState<string>(\"input\");\n\n\tconst Background = styled.View`\n\t\tflex: 1;\n\t\tbackground-color: #e2e2e5;\n\t`;\n\n\treturn (\n\t\t<SafeAreaView style={{ flex: 1 }}>\n\t\t\t<Background>\n\t\t\t\t<StatusBar style=\"dark\" />\n\t\t\t\t{navigation == \"input\" || navigation == \"planner\" ? (\n\t\t\t\t\t<Planner\n\t\t\t\t\t\t{...{ options }}\n\t\t\t\t\t\t{...{ setOptions }}\n\t\t\t\t\t\t{...{ setData }}\n\t\t\t\t\t\t{...{ navigation }}\n\t\t\t\t\t\t{...{ setNavigation }}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<Flight\n\t\t\t\t\t\t{...{ setNavigation }}\n\t\t\t\t\t\t{...{ options }}\n\t\t\t\t\t\t{...{ data }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</Background>\n\t\t</SafeAreaView>\n\t);\n};\n\nexport default App;\n"],"sourceRoot":""}